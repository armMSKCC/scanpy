import sys
import warnings
from distutils.version import LooseVersion

# version generated by versioneer
from ._version import get_versions
__version__ = get_versions()['version']
del get_versions

if sys.version_info < (3, 0):
    warnings.warn('Scanpy only runs reliably with Python 3, preferrably >=3.5.')

import pandas as pd
if pd.__version__ < LooseVersion('0.21'):
    raise ImportError('Scanpy needs pandas version >=0.21, not {}.\n'
                      'Run `pip install pandas --upgrade`.'
                      .format(pd.__version__))

import anndata
# NOTE: pytest does not correctly retrieve anndata's version? why?
#       use the following hack...
if anndata.__version__ != '0+unknown':
    if anndata.__version__ < LooseVersion('0.6.10'):
        raise ImportError('Scanpy {} needs anndata version >=0.6.10, not {}.\n'
                          'Run `pip install anndata -U --no-deps`.'
                          .format(__version__, anndata.__version__))


from . import tools as tl
from . import preprocessing as pp
from . import plotting as pl

from anndata import AnnData
from .neighbors import Neighbors

from anndata import read as read_h5ad
from anndata import read_csv, read_excel, read_hdf, read_loom, read_mtx, read_text, read_umi_tools

from .readwrite import read, read_10x_h5, read_10x_mtx, write, read_params, write_params
from .settings import set_figure_params


import sys
utils.annotate_doc_types(sys.modules[__name__], 'scanpy')
del sys
